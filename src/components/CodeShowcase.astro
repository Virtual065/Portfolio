---
import blueprintImg from '../assets/blueprint.png';

const codeSnippets = [
  {
    language: 'C#',
    label: 'Unity',
    type: 'code',
    code: `public class PlayerController : MonoBehaviour
{
    [SerializeField] private float moveSpeed = 5f;
    private Rigidbody rb;

    void Start() => rb = GetComponent<Rigidbody>();

    void FixedUpdate()
    {
        float h = Input.GetAxis("Horizontal");
        float v = Input.GetAxis("Vertical");
        Vector3 move = new Vector3(h, 0, v);
        rb.MovePosition(rb.position + move * moveSpeed * Time.fixedDeltaTime);
    }
}`
  },
  {
    language: 'Vue',
    label: 'Vue 3',
    type: 'code',
    code: `<template>
  <div class="project-grid">
    <ProjectCard
      v-for="project in filteredProjects"
      :key="project.id"
      :project="project"
      @click="openProject(project)"
    />
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import type { Project } from '@/types'

const projects = ref<Project[]>([])
const filter = ref('all')

const filteredProjects = computed(() =>
  filter.value === 'all'
    ? projects.value
    : projects.value.filter(p => p.category === filter.value)
)

const openProject = (project: Project) => {
  router.push({ name: 'project', params: { id: project.id } })
}
</script>`
  },
  {
    language: 'C++',
    label: 'Unreal Engine',
    type: 'code',
    code: `void AWeaponBase::Fire()
{
    if (!CanFire()) return;

    FHitResult Hit;
    FVector Start = MuzzleComponent->GetComponentLocation();
    FVector End = Start + (GetActorForwardVector() * Range);

    FCollisionQueryParams Params;
    Params.AddIgnoredActor(this);
    Params.AddIgnoredActor(GetOwner());

    if (GetWorld()->LineTraceSingleByChannel(Hit, Start, End, ECC_Visibility, Params))
    {
        if (AActor* HitActor = Hit.GetActor())
        {
            UGameplayStatics::ApplyDamage(HitActor, Damage, GetInstigatorController(), this, DamageType);
            SpawnImpactEffect(Hit);
        }
    }

    PlayFireMontage();
    CurrentAmmo--;
}`
  },
  {
    language: 'Blueprint',
    label: 'Unreal Visual',
    type: 'image'
  }
];
---

<section class="min-h-screen flex items-center justify-center px-6 py-20" id="code">
  <div class="w-full max-w-5xl mx-auto">
    <div class="text-center mb-16">
      <h2 class="reveal text-3xl md:text-4xl font-bold mb-4">
        Code <span class="text-[var(--accent-light)]">Samples</span>
      </h2>
      <p class="reveal text-[var(--text-secondary)] text-base max-w-xl mx-auto">
        A glimpse into how I write code
      </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      {codeSnippets.map((snippet) => (
        <div class="reveal group">
          <div class="flex items-center justify-between px-4 py-3 bg-[var(--bg-tertiary)] rounded-t-xl border border-b-0 border-[var(--bg-tertiary)] group-hover:border-[var(--accent)] transition-colors">
            <div class="flex items-center gap-3">
              <div class="flex gap-1.5">
                <div class="w-3 h-3 rounded-full bg-red-500/80"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
                <div class="w-3 h-3 rounded-full bg-green-500/80"></div>
              </div>
              <span class="text-[var(--text-muted)] text-sm font-mono">{snippet.label}</span>
            </div>
            <span class="text-[var(--accent-light)] text-sm font-mono">{snippet.language}</span>
          </div>
          {snippet.type === 'code' ? (
            <div class="rounded-b-xl border border-t-0 border-[var(--bg-tertiary)] group-hover:border-[var(--accent)] transition-colors overflow-hidden">
              <pre class="p-4 bg-[#0d0d12] overflow-auto h-[450px]"><code class="font-mono text-sm leading-relaxed text-[var(--text-secondary)]">{snippet.code}</code></pre>
            </div>
          ) : (
            <div class="bg-[#0d0d12] rounded-b-xl border border-t-0 border-[var(--bg-tertiary)] group-hover:border-[var(--accent)] transition-colors overflow-hidden h-[450px]">
              <img src={blueprintImg.src} alt="Unreal Blueprint" class="w-full h-full object-cover object-center" />
            </div>
          )}
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  pre::-webkit-scrollbar { height: 6px; width: 6px; }
  pre::-webkit-scrollbar-track { background: var(--bg-tertiary); border-radius: 3px; }
  pre::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 3px; }
  pre::-webkit-scrollbar-corner { background: var(--bg-tertiary); }
</style>
